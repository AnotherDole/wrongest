(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}})(function(e){"use strict";var t={},n=Math.max,r=Math.min;t.c={};t.c.d=e(document);t.c.t=function(e){return e.originalEvent.touches.length-1};t.o=function(){var n=this;this.o=null;this.$=null;this.i=null;this.g=null;this.v=null;this.cv=null;this.x=0;this.y=0;this.w=0;this.h=0;this.$c=null;this.c=null;this.t=0;this.isInit=false;this.fgColor=null;this.pColor=null;this.dH=null;this.cH=null;this.eH=null;this.rH=null;this.scale=1;this.relative=false;this.relativeWidth=false;this.relativeHeight=false;this.$div=null;this.run=function(){var t=function(e,t){var r;for(r in t){n.o[r]=t[r]}n._carve().init();n._configure()._draw()};if(this.$.data("kontroled"))return;this.$.data("kontroled",true);this.extend();this.o=e.extend({min:this.$.data("min")!==undefined?this.$.data("min"):0,max:this.$.data("max")!==undefined?this.$.data("max"):100,stopper:true,readOnly:this.$.data("readonly")||this.$.attr("readonly")==="readonly",cursor:this.$.data("cursor")===true&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:this.$.data("displayinput")==null||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:false,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(e){return e},parse:function(e){return parseFloat(e)}},this.o);this.o.flip=this.o.rotation==="anticlockwise"||this.o.rotation==="acw";if(!this.o.inputColor){this.o.inputColor=this.o.fgColor}if(this.$.is("fieldset")){this.v={};this.i=this.$.find("input");this.i.each(function(t){var r=e(this);n.i[t]=r;n.v[t]=n.o.parse(r.val());r.bind("change blur",function(){var e={};e[t]=r.val();n.val(n._validate(e))})});this.$.find("legend").remove()}else{this.i=this.$;this.v=this.o.parse(this.$.val());this.v===""&&(this.v=this.o.min);this.$.bind("change blur",function(){n.val(n._validate(n.o.parse(n.$.val())))})}!this.o.displayInput&&this.$.hide();this.$c=e(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height});this.$div=e('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+"px;"+'"></div>');this.$.wrap(this.$div).before(this.$c);this.$div=this.$.parent();if(typeof G_vmlCanvasManager!=="undefined"){G_vmlCanvasManager.initElement(this.$c[0])}this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null;if(!this.c){throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}}}this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1);this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%");this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%");this.relative=this.relativeWidth||this.relativeHeight;this._carve();if(this.v instanceof Object){this.cv={};this.copy(this.v,this.cv)}else{this.cv=this.v}this.$.bind("configure",t).parent().bind("configure",t);this._listen()._configure()._xy().init();this.isInit=true;this.$.val(this.o.format(this.v));this._draw();return this};this._carve=function(){if(this.relative){var e=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),t=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(e,t)}else{this.w=this.o.width;this.h=this.o.height}this.$div.css({width:this.w+"px",height:this.h+"px"});this.$c.attr({width:this.w,height:this.h});if(this.scale!==1){this.$c[0].width=this.$c[0].width*this.scale;this.$c[0].height=this.$c[0].height*this.scale;this.$c.width(this.w);this.$c.height(this.h)}return this};this._draw=function(){var e=true;n.g=n.c;n.clear();n.dH&&(e=n.dH());e!==false&&n.draw()};this._touch=function(e){var r=function(e){var t=n.xy2val(e.originalEvent.touches[n.t].pageX,e.originalEvent.touches[n.t].pageY);if(t==n.cv)return;if(n.cH&&n.cH(t)===false)return;n.change(n._validate(t));n._draw()};this.t=t.c.t(e);r(e);t.c.d.bind("touchmove.k",r).bind("touchend.k",function(){t.c.d.unbind("touchmove.k touchend.k");n.val(n.cv)});return this};this._mouse=function(e){var r=function(e){var t=n.xy2val(e.pageX,e.pageY);if(t==n.cv)return;if(n.cH&&n.cH(t)===false)return;n.change(n._validate(t));n._draw()};r(e);t.c.d.bind("mousemove.k",r).bind("keyup.k",function(e){if(e.keyCode===27){t.c.d.unbind("mouseup.k mousemove.k keyup.k");if(n.eH&&n.eH()===false)return;n.cancel()}}).bind("mouseup.k",function(e){t.c.d.unbind("mousemove.k mouseup.k keyup.k");n.val(n.cv)});return this};this._xy=function(){var e=this.$c.offset();this.x=e.left;this.y=e.top;return this};this._listen=function(){if(!this.o.readOnly){this.$c.bind("mousedown",function(e){e.preventDefault();n._xy()._mouse(e)}).bind("touchstart",function(e){e.preventDefault();n._xy()._touch(e)});this.listen()}else{this.$.attr("readonly","readonly")}if(this.relative){e(window).resize(function(){n._carve().init();n._draw()})}return this};this._configure=function(){if(this.o.draw)this.dH=this.o.draw;if(this.o.change)this.cH=this.o.change;if(this.o.cancel)this.eH=this.o.cancel;if(this.o.release)this.rH=this.o.release;if(this.o.displayPrevious){this.pColor=this.h2rgba(this.o.fgColor,"0.4");this.fgColor=this.h2rgba(this.o.fgColor,"0.6")}else{this.fgColor=this.o.fgColor}return this};this._clear=function(){this.$c[0].width=this.$c[0].width};this._validate=function(e){var t=~~((e<0?-.5:.5)+e/this.o.step)*this.o.step;return Math.round(t*100)/100};this.listen=function(){};this.extend=function(){};this.init=function(){};this.change=function(e){};this.val=function(e){};this.xy2val=function(e,t){};this.draw=function(){};this.clear=function(){this._clear()};this.h2rgba=function(e,t){var n;e=e.substring(1,7);n=[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)];return"rgba("+n[0]+","+n[1]+","+n[2]+","+t+")"};this.copy=function(e,t){for(var n in e){t[n]=e[n]}}};t.Dial=function(){t.o.call(this);this.startAngle=null;this.xy=null;this.radius=null;this.lineWidth=null;this.cursorExt=null;this.w2=null;this.PI2=2*Math.PI;this.extend=function(){this.o=e.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:true},this.o)};this.val=function(e,t){if(null!=e){e=this.o.parse(e);if(t!==false&&e!=this.v&&this.rH&&this.rH(e)===false){return}this.cv=this.o.stopper?n(r(e,this.o.max),this.o.min):e;this.v=this.cv;this.$.val(this.o.format(this.v));this._draw()}else{return this.v}};this.xy2val=function(e,t){var i,s;i=Math.atan2(e-(this.x+this.w2),-(t-this.y-this.w2))-this.angleOffset;if(this.o.flip){i=this.angleArc-i-this.PI2}if(this.angleArc!=this.PI2&&i<0&&i>-.5){i=0}else if(i<0){i+=this.PI2}s=i*(this.o.max-this.o.min)/this.angleArc+this.o.min;this.o.stopper&&(s=n(r(s,this.o.max),this.o.min));return s};this.listen=function(){var t=this,i,s,o=function(e){e.preventDefault();var o=e.originalEvent,u=o.detail||o.wheelDeltaX,a=o.detail||o.wheelDeltaY,f=t._validate(t.o.parse(t.$.val()))+(u>0||a>0?t.o.step:u<0||a<0?-t.o.step:0);f=n(r(f,t.o.max),t.o.min);t.val(f,false);if(t.rH){clearTimeout(i);i=setTimeout(function(){t.rH(f);i=null},100);if(!s){s=setTimeout(function(){if(i)t.rH(f);s=null},200)}}},u,a,f=1,l={37:-t.o.step,38:t.o.step,39:t.o.step,40:-t.o.step};this.$.bind("keydown",function(i){var s=i.keyCode;if(s>=96&&s<=105){s=i.keyCode=s-48}u=parseInt(String.fromCharCode(s));if(isNaN(u)){s!==13&&s!==8&&s!==9&&s!==189&&(s!==190||t.$.val().match(/\./))&&i.preventDefault();if(e.inArray(s,[37,38,39,40])>-1){i.preventDefault();var o=t.o.parse(t.$.val())+l[s]*f;t.o.stopper&&(o=n(r(o,t.o.max),t.o.min));t.change(t._validate(o));t._draw();a=window.setTimeout(function(){f*=2},30)}}}).bind("keyup",function(e){if(isNaN(u)){if(a){window.clearTimeout(a);a=null;f=1;t.val(t.$.val())}}else{t.$.val()>t.o.max&&t.$.val(t.o.max)||t.$.val()<t.o.min&&t.$.val(t.o.min)}});this.$c.bind("mousewheel DOMMouseScroll",o);this.$.bind("mousewheel DOMMouseScroll",o)};this.init=function(){if(this.v<this.o.min||this.v>this.o.max){this.v=this.o.min}this.$.val(this.v);this.w2=this.w/2;this.cursorExt=this.o.cursor/100;this.xy=this.w2*this.scale;this.lineWidth=this.xy*this.o.thickness;this.lineCap=this.o.lineCap;this.radius=this.xy-this.lineWidth/2;this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset);this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc);this.angleOffset=this.o.angleOffset*Math.PI/180;this.angleArc=this.o.angleArc*Math.PI/180;this.startAngle=1.5*Math.PI+this.angleOffset;this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var e=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(this.w*3/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/e>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})};this.change=function(e){this.cv=e;this.$.val(this.o.format(e))};this.angle=function(e){return(e-this.o.min)*this.angleArc/(this.o.max-this.o.min)};this.arc=function(e){var t,n;e=this.angle(e);if(this.o.flip){t=this.endAngle+1e-5;n=t-e-1e-5}else{t=this.startAngle-1e-5;n=t+e+1e-5}this.o.cursor&&(t=n-this.cursorExt)&&(n=n+this.cursorExt);return{s:t,e:n,d:this.o.flip&&!this.o.cursor}};this.draw=function(){var e=this.g,t=this.arc(this.cv),n,r=1;e.lineWidth=this.lineWidth;e.lineCap=this.lineCap;if(this.o.bgColor!=="none"){e.beginPath();e.strokeStyle=this.o.bgColor;e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,true);e.stroke()}if(this.o.displayPrevious){n=this.arc(this.v);e.beginPath();e.strokeStyle=this.pColor;e.arc(this.xy,this.xy,this.radius,n.s,n.e,n.d);e.stroke();r=this.cv==this.v}e.beginPath();e.strokeStyle=r?this.o.fgColor:this.fgColor;e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d);e.stroke()};this.cancel=function(){this.val(this.v)}};e.fn.dial=e.fn.knob=function(n){return this.each(function(){var r=new t.Dial;r.o=n;r.$=e(this);r.run()}).parent()}});function showCreate(){$("#startDiv").removeClass("hidden"),$("#createDiv").addClass("hidden")}function showJoin(){$("#startDiv").addClass("hidden"),$("#joinDiv").removeClass("hidden")}function getStatements(){$("#RoomSetup").addClass("hidden"),$("#GameView").removeClass("hidden"),$("#orderDiv").removeClass("hidden")}function makeToast(holder,type,msg){$('ul.toasts[data-toast="'+holder+'"]').append('<li class="'+type+'">'+msg+"</li>"),setTimeout(function(){$('ul.toasts[data-toast="'+holder+'"] li:first-child').remove()},5200)}function showButton(){$(".least-wrong").length>0&&$(".most-wrong").length>0?$(".button-holder").removeClass("hidden"):$(".button-holder").addClass("hidden")}function updateDeckDescription(){var theDeck=deckData[$("#deck").val()];$("#deckdescription").empty().append(theDeck.description+" Cards: "+theDeck.numCards)}function joinroom(){socket.emit("requestjoin",$("#joinUsernameInput").val(),$("#joinRoomName").val())}function leaveroom(){socket.emit("requestleave")}function makeDefend(){$("#dealerControls").addClass("hidden"),socket.emit("makedefend")}function donedefend(){$(".knob-holder").addClass("hidden"),$("#defendDiv").addClass("hidden"),socket.emit("donedefending"),meDefending=!1}function updateVoteSelectors(){for(var theName,row=0,i=0;i<playerList.length;i++)if(theName=playerList[i],theName!=username){row++;var theStatement=currentStatements[theName].quote.replace("{","").replace("}","");$("#voterow"+row).removeClass("hidden"),$("#votequote"+row).empty().text(theStatement),$("#quotecite"+row).empty().text(theName),$("#mostwrong"+row).attr("name",theName),$("#leastwrong"+row).attr("name",theName)}else $("#MyQuote").empty().append(currentStatements[username].quote.replace("{","").replace("}","")),$("#MyCite").empty().append(theName);for(row++;7>=row;row++)$("#voterow"+row).addClass("hidden")}function makeStatementTeaser(statement){var splat=statement.split("{"),toReturn=splat[0]+"...";return toReturn+statement.split("}")[1]}function everySecond(){return timer.current--,timer.current<=0?(window.clearInterval(clockTick),void(meDefending&&(console.log("time up: "+timer.total),ga("send","event",{eventCategory:"defended",eventAction:"time up",eventLabel:timer.total}),donedefend()))):(timer.current>timer.warning?(timer.knobColor="#7a6969",timer.knobTextColor="#2d2929"):timer.current>timer.danger?(timer.knobColor="#EF4D79",timer.knobTextColor="#2d2929"):(timer.knobColor="#c1272d",timer.knobTextColor="#c1272d"),$(".knob").trigger("configure",{fgColor:timer.knobColor,inputColor:timer.knobTextColor}),void $(".knob").val(timer.current).trigger("change"))}function startTimer(time){timer.total=time,$(".knob").knob({min:0,max:timer.total,readOnly:!0,fgColor:"#7a6969",bgColor:"#eae6e6",dynamicDraw:!0,thickness:.5}),$(".knob").val(timer.total).trigger("change"),$(".knob").trigger("configure",{fgColor:"#7a6969",inputColor:"#2d2929"}),$(".knob-holder").removeClass("hidden"),timer.current=timer.total,clockTick=setInterval(function(){everySecond()},1e3)}!function($){$.fn.shuffle=function(){return this.each(function(){var items=$(this).children().clone(!0);return items.length?$(this).html($.shuffle(items)):this})},$.shuffle=function(arr){for(var j,x,i=arr.length;i;j=parseInt(Math.random()*i),x=arr[--i],arr[i]=arr[j],arr[j]=x);return arr}}(jQuery);var timer={};timer.total=30,timer.notice=20,timer.warning=10,timer.danger=5,timer.current=timer.total,timer.knobColor="#38A4DC",timer.knobTextColor="#2d2929";var clockTick;
;if($(".room-pick").click(function(){$(this).parent().parent().addClass("chosen"),$(this).parent().parent().siblings(".row").addClass("hidden"),$(".create-or-join .row.chosen input").fadeIn(300),$(".create-or-join .row.chosen input:first-child").focus()}),$("#JoinRoomButtonWithCode").click(function(){$("#joinUsernameInputAlt").blur(),socket.emit("requestjoin",$("#joinUsernameInputAlt").val(),$("#joinRoomCode").val())}),$("#CreateRoomButton").click(function(){$("#createUsernameInput").blur(),socket.emit("createroom",$("#createUsernameInput").val())}),$("#JoinRoomButton").click(function(){$(".lead-in").addClass("hidden"),$(".create-or-join").addClass("hidden"),$(".join-screen").removeClass("hidden")}),$("#createUsernameInput").keyup(function(e){13==e.keyCode&&$("#CreateRoomButton").click()}),$("#joinUsernameInputAlt").keyup(function(e){13==e.keyCode&&$("#JoinRoomButtonWithCode").click()}),$('input[data-holds="roomURL"], input[data-holds="roomURL"]').click(function(){return this.selectionStart=0,this.selectionEnd=this.value.length,!1}),$(".settings-toggle").click(function(){$(this).children(".icon").toggleClass("spin"),$(this).siblings("dd").slideToggle(500)}),$("#StartGameButton").click(function(){var v=playerList.length;ga("send","event",{eventCategory:"start game",eventAction:"players",eventLabel:v}),socket.emit("requeststart",$("#deck").val(),$("#timeLimit").val(),$("#allowRedraw").val(),$("#dealerSelect").val())}),location.pathname.length>1){var theCode=location.pathname.substr(1);$("#JoinWithCodeRow").addClass("chosen"),$("#JoinWithCodeRow").siblings(".row").addClass("hidden"),$(".create-or-join .row.chosen input").fadeIn(300),$("#joinUsernameInputAlt").focus(),$("#joinRoomCode").val(theCode)}$("#DoneEarlyButton").click(function(){window.clearInterval(clockTick),ga("send","event",{eventCategory:"defended",eventAction:"done early",eventLabel:timer.total}),donedefend()}),$(".least-wrong-button").click(function(){$(this).toggleClass("active"),$(this).hasClass("active")?($r=$(this).parent().parent().parent(),$l=$(this).parent().parent().siblings(".votebutton").children("label"),$(this).siblings("input").prop("checked",!0),$r.addClass("least-wrong"),$r.siblings("tr").removeClass("least-wrong"),$r.siblings("tr").find('input[value="LeastWrong"]').prop("checked",!1),$r.siblings("tr").find(".least-wrong-button").removeClass("active"),$r.hasClass("most-wrong")&&($r.removeClass("most-wrong"),$l.children("input").prop("checked",!1),$l.children(".most-wrong-button").removeClass("active"))):($(this).siblings("input").prop("checked",!1),$r.removeClass("least-wrong")),showButton()}),$(".most-wrong-button").click(function(){$(this).toggleClass("active"),$(this).hasClass("active")?($r=$(this).parent().parent().parent(),$l=$(this).parent().parent().siblings(".votebutton").children("label"),$(this).siblings("input").prop("checked",!0),$r.addClass("most-wrong"),$r.siblings("tr").removeClass("most-wrong"),$r.siblings("tr").find('input[value="MostWrong"]').prop("checked",!1),$r.siblings("tr").find(".most-wrong-button").removeClass("active"),$r.hasClass("least-wrong")&&($r.removeClass("least-wrong"),$l.children("input").prop("checked",!1),$l.children(".least-wrong-button").removeClass("active"))):($(this).siblings("input").prop("checked",!1),$r.removeClass("most-wrong")),showButton()}),$("#SubmitVotes").click(function(){$("#VotingBooth").addClass("revealed"),$("#SubmitVotes").addClass("hidden"),$("#WaitingAtBoothBecause").text("waiting for other players to vote").removeClass("hidden"),socket.emit("playervotes",$('input[value="MostWrong"]:checked').attr("name"),$('input[value="LeastWrong"]:checked').attr("name"))}),$("a.social").click(function(){var n=$(this).attr("data-network"),h=$(this).attr("href");ga("send","event",{eventCategory:"social share",eventAction:n,eventLabel:h})}),$("#PlayAgain").click(function(){$("#GameOverScreen").addClass("hidden"),$("#RoomSetup").removeClass("hidden"),$("#roomDiv").removeClass("hidden")});
;var username="",deckData=null,currentStatements=null,playerList=[],playerScores=[],meDefending=!1,meDealer=!1,meWaiting=!1,gameOver=!1,socket;socket=location.hostname.indexOf("wrongest.net")>-1?io(location.hostname+":8000"):io(),socket.on("pausegame",function(){$("#roomDiv").addClass("hidden"),$("#GameView").addClass("hidden"),$("#GameClockHolder").addClass("hidden"),$("#defendDiv").addClass("hidden"),$("#VotingBooth").addClass("hidden"),$("#RoomSetup").removeClass("hidden"),$("#pauseDiv").removeClass("hidden"),$(".button-holder").removeClass("hidden")}),socket.on("deckdata",function(data){deckData=data,$("#deck").empty();for(var deck in data)$("#deck").append($("<option/>",{text:deck,value:deck}));updateDeckDescription()}),socket.on("createresult",function(data){data.success?(username=data.playerName,$('input[data-holds="roomCode"]').val(data.roomName),$('input[data-holds="roomURL"]').val(data.link),$("#createDiv").addClass("hidden"),$(".create-or-join").addClass("hidden"),$(".create-screen").removeClass("hidden"),$("#roomDiv").removeClass("hidden"),$("#startDiv").addClass("hidden"),history.pushState({},"room "+data.roomName,"/"+data.roomName),ga("send","pageview","/"+data.roomName)):makeToast("setup","alert",data.message)}),socket.on("joinresult",function(data){data.success?($("#joinDiv").addClass("hidden"),$("#roomDiv").removeClass("hidden"),$("#startDiv").addClass("hidden"),$('input[data-holds="roomCode"]').val(data.roomName),$('input[data-holds="roomURL"]').val(data.link),history.pushState({},"room "+data.roomName,"/"+data.roomName),ga("send","pageview","/"+data.roomName),username=data.playerName,data.waiting&&(meWaiting=!0,$("#waitingDiv").removeClass("hidden"),$(".admin-options").addClass("hidden"))):makeToast("setup","alert",data.message)}),socket.on("leaveresult",function(data){data.success&&(username=!1,$("#roomDiv").hide(),$("#orderDiv").hide(),$("#statementsDiv").hide(),$("#voteResult").hide(),$("#startDiv").show())}),socket.on("updatecurrentroom",function(players,leader,dealer,scores){playerList=players,playerScores=scores;var $theDiv,$toChange=$("#joinRoomMembers").add("#pauseRoomMembers").add("#detailsRoomMembers");if($toChange.empty(),null===scores){$(".has-score").removeClass("has-score");for(var i=1;8>=i;i++)$("#playerScore"+i).empty()}$toChange.append("Currently in the room:");for(var i=0;i<players.length;i++)$toChange.append(players[i]==leader?'<li class="leader">'+players[i]+"</li>":"<li>"+players[i]+"</li>"),$theDiv=$("#player"+(i+1)).removeClass("hidden"),players[i]==dealer?$theDiv.addClass("dealer"):$theDiv.removeClass("dealer"),$("#playerName"+(i+1)).empty().append(players[i]),null!==scores&&($theDiv.addClass("has-score"),$("#playerScore"+(i+1)).empty().append(scores[i]));for(var i=players.length+1;8>=i;i++)$("#player"+i).addClass("hidden");if(leader==username?($(".admin-options").removeClass("hidden"),$("#restartOption").removeClass("hidden"),players.length<3?($("#RestartButton").addClass("hidden"),$("#RestartGameBother").removeClass("hidden"),$("#StartGameButton").addClass("hidden"),$("#StartGameBother").removeClass("hidden")):($("#RestartButton").removeClass("hidden"),$("#RestartGameBother").addClass("hidden"),$("#StartGameButton").removeClass("hidden"),$("#StartGameBother").addClass("hidden"))):($(".admin-options").addClass("hidden"),$("#restartOption").addClass("hidden")),dealer==username?(meDealer=!0,$("#GameClockHolder").hasClass("hidden")&&$("#dealerControls").removeClass("hidden")):(meDealer=!1,$("#dealerControls").addClass("hidden")),$(".on-deck").removeClass("on-deck"),$(".player-tease").empty(),playerList[0]==username&&!$("#player1").hasClass("completed")&&null!==currentStatements){var myStatement=currentStatements[username].quote;$("#player1").addClass("on-deck"),$("#playerTease1").text(makeStatementTeaser(myStatement))}}),socket.on("startresult",function(data){data.success?($("#startresult").text("Game Started"),$("#RoomSetup").addClass("hidden"),$("#GameView").removeClass("hidden")):$("#startresult").text(data.message)}),socket.on("getstatements",function(data){meWaiting=!1,gameOver=!1,currentStatements=data,$("#VotingBooth").hasClass("hidden")&&($("#roomDiv").addClass("hidden"),$("#waitingDiv").addClass("hidden"),$("#RoomSetup").addClass("hidden"),$("#pauseDiv").addClass("hidden"),$("#GameView").removeClass("hidden"),$("#orderDiv").removeClass("hidden"),$("#GameOverScreen").addClass("hidden"))}),socket.on("timetodefend",function(player,time){if(!meWaiting){if(player==username){meDefending=!0,$("#defendDiv").removeClass("hidden"),$("#orderDiv").addClass("hidden"),$("#EarlyButtonHolder").removeClass("hidden");var myStatement=currentStatements[username].quote.replace("{",'<span class="revealed">').replace("}","</span>");$("#statementDiv").empty().append(myStatement),currentStatements[username].score<-1?$("#HardCardSticker").removeClass("hidden"):$("#HardCardSticker").addClass("hidden")}for(var i=1;8>=i;i++)if(!$("#player"+i).hasClass("completed")){$("#player"+i).addClass("active");break}startTimer(time),$(".knob-holder").removeClass("hidden")}}),socket.on("newdefendcount",function(newCount,stopClock){if(!meWaiting){if(stopClock&&(window.clearInterval(clockTick),$(".knob-holder").addClass("hidden")),meDefending||(meDealer&&stopClock&&$("#dealerControls").removeClass("hidden"),$("#orderDiv").removeClass("hidden")),newCount>0){for(var playersDone=playerList.length-newCount,i=1;8>=i;i++)playersDone>=i?$("#player"+i).addClass("completed"):$("#player"+i).removeClass("completed");if(playerList[playersDone]==username){var myStatement=currentStatements[username].quote,num=playersDone+1;$("#player"+num).addClass("on-deck"),$("#playerTease"+num).text(makeStatementTeaser(myStatement))}else $(".on-deck").removeClass("on-deck"),$(".player-tease").empty()}else $(".on-deck").removeClass("on-deck"),$(".player-tease").empty(),$("#VotingBooth").hasClass("hidden")||makeToast("vote","info","Someone left the room. Please vote again."),$("#GameView").addClass("hidden"),$("#VotingBooth").removeClass("revealed show-scores"),$("#SubmitVotes").removeClass("hidden"),$("#VotingOptions").shuffle(),$("#WaitingAtBoothBecause").text("").addClass("hidden"),$("#VotingBooth").removeClass("hidden"),$("#VotingBooth").children().removeClass("chosen"),$("#SendVotesButton").addClass("hidden"),$("#voteResult").empty(),$(".button-holder").addClass("hidden"),$(".most-wrong").removeClass("most-wrong"),$(".least-wrong").removeClass("least-wrong"),$('input[Value="MostWrong"]').prop("checked",!1),$('input[Value="LeastWrong"]').prop("checked",!1),updateVoteSelectors();$(".active").removeClass("active")}}),socket.on("donefailed",function(data){$("#votestatus").text(data)}),socket.on("votefailed",function(data){$("#voteResult").append(data+"<br>")}),socket.on("roundend",function(data){for(var theName,changeString,playerData=(data.gameData,data.playerData),row=0,i=1;i<=playerList.length;i++)$("#player"+i).removeClass("completed"),theName=playerList[i-1],changeString=0===playerData[theName].scoreChange?"":"+"+playerData[theName].scoreChange,theName!=username?(row++,$("#ScoreChange"+row).empty().append(changeString)):$("#MyScoreChange").empty().append(changeString);$("#VotingBooth tr").removeClass("most-wrong least-wrong");var nextRoundIn=8,nextRoundInMS=1e3*nextRoundIn,nrs=nextRoundIn;$("#WaitingAtBoothBecause").html('<span class="next-round-in">Next round in </span> <input class="tiny-knob knobtext" type="text" value="'+nextRoundIn+'" data-max="'+nextRoundIn+'" data-bgcolor="#eae6e6" data-fgcolor="#7a6969" data-inputcolor="#7a6969" data-min="0" data-width="48" data-height="48" />'),$(".tiny-knob").knob(),$("#VotingBooth").toggleClass("show-scores");var nextRoundClock=setInterval(function(){nrs--,$(".tiny-knob").val(nrs).trigger("change")},1e3);setTimeout(function(){window.clearInterval(nextRoundClock),$("#WaitingAtBoothBecause").text("").addClass("hidden"),$("#VotingBooth").toggleClass("show-scores"),$("#VotingBooth").addClass("hidden"),gameOver?$("#GameOverScreen").removeClass("hidden").siblings("section").addClass("hidden"):$("#GameView").removeClass("hidden")},nextRoundInMS)}),socket.on("gameover",function(card,cardScore,players,finalPlayerList,finalScores){gameOver=!0;var i,scoresArray=[];for(i=0;i<finalPlayerList.length;i++)scoresArray.push({name:finalPlayerList[i],score:finalScores[i]});scoresArray.sort(function(a,b){return b.score-a.score}),placeClasses=["first-place","second-place","third-place","fourth-place","fifth-place","sixth-place","seventh-place","eighth-place"];var p=0;for(i=0;i<finalPlayerList.length;i++)$("#place"+(i+1)).removeClass("hidden"),$("#namePlace"+(i+1)).text(scoresArray[i].name),$("#scorePlace"+(i+1)).text(scoresArray[i].score),1>i||scoresArray[i].score!==scoresArray[i-1].score&&p++,$("#place"+(i+1)).addClass(placeClasses[p]);for(i++;8>=i;i++)$("#place"+i).addClass("hidden");var wrongestwordsofthegame=card.replace("{","").replace("}","");$("#WrongestQuote").text(wrongestwordsofthegame),$("#WrongestScore").text(cardScore);var playerString="";if(1==players.length)playerString=players[0];else if(2==players.length)playerString=players[0]+" and "+players[1];else{for(i=0;i<players.length-1;i++)playerString=playerString+players[i]+", ";playerString=playerString+"and "+players[i]}if($("#WrongestCite").text(playerString),meDealer){var topPlayerScore=parseInt($("#scorePlace1").text());ga("send","event",{eventCategory:"Wrongest Words of the Game",eventAction:wrongestwordsofthegame,eventLabel:cardScore}),ga("send","event",{eventCategory:"end game",eventAction:"players",eventLabel:finalPlayerList.length}),ga("send","event",{eventCategory:"Top Score",eventAction:"top score",eventLabel:topPlayerScore})}});
;!function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-15129990-12","auto"),ga("send","pageview");
;
//# sourceMappingURL=wrongest.min.js.map