<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>The Wrongest Words v0.1.0</title>
    <link href='http://fonts.googleapis.com/css?family=Comfortaa:400,700,300' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/wrongest.css" rel="stylesheet" />
  </head>
  <body>

    <!-- PREGAME screen (mostly lobby setup) -->
    <section id="RoomSetup" class="setup screen">

      <img src="svg/logo2.svg" class="game-logo" />
      
      <!-- New user -->
      <div class="starting-screen" id='startDiv'>
        <summary class="game-explanation">
          Here will be some text that explains how the game works. It will include a link to some other resource, like a page of text or maybe a video?
        </summary>
        <input type="text" data-holds="playerName" id='createUsernameInput' maxlength="50" placeholder="Your Name">
        <div class="button-holder">
          <button  id='createroombutton' onclick='createroom();'>CREATE game</button>
        </div>
      </div>
      
      <!-- Join room screen -->
      <div class="join-screen hidden" id="joinDiv">
        <div class="room-details">
          <ol class="players" id='joinRoomMembers'>Retrieving the player list...</ol>
        </div>
        <div class="inputs">
          <div class="username row">
            <input type='text' data-holds="playerName" id='joinUsernameInput' maxlength='50' placeholder="Your Name">
            <input type='text' id='joinRoomName' class='hidden'>
          </div>
        </div>
        <div class="button-holder">
          <button type="submit" id='joinroombutton' onclick='joinroom();'>JOIN!</button>
        </div>
      </div>

      <!-- Game is paused. -->
      <div class="pause-screen hidden" id="pauseDiv">
        <p>The number of active players in the room dropped below 3 and so the game was paused.</p>
        <p>When the number of players in the room reaches 3 or more again, the leader can restart the game.</p>
        <figure>
          <figcaption>Copy and paste:</figcaption>
          <input type="url" readonly id="pauseRoomURL" />
        </figure>
        <div class="lobby-box">
          <ol class="players" id="pauseRoomMembers"></ol>
        </div>
        <div class="button-holder hidden" id='restartOption'>
          <button id="RestartButton" onclick="socket.emit('restartgame');">Restart Game</button>
          <span id="RestartGameBother">You need at least 3 players. Go bug your friends!</span>
        </div>
      </div>
      
      <!-- The lobby screen. People are in a room, but the game hasn't started yet. -->
      <div class="room-details hidden" id="roomDiv">

        <!-- only if you're waiting for the round to end -->
        <div class="hidden" id="waitingDiv">
          <p>You have joined a game in progress. When the current round ends, you will be able to start playing.</p>
        </div>

        <figure>
          <figcaption>Copy and paste:</figcaption>
          <input type="url" readonly id="roomURL" />
        </figure>
        <div class="lobby-box">
          <ol class="players" id='detailsRoomMembers'>Retrieving player list...</ol>
        </div>
        <div class="button-holder admin-options">
          <button id="StartGameButton" onclick="startgame();">Start Game</button>
          <span id="StartGameBother">You need at least 3 players. Go bug your friends!</span>
        </div>
        
        <!-- Game Settings for the lobby leader -->
        <div class="settings-toggle admin-options">
          <span>settings</span>
          <i class="fa fa-cog"></i>
        </div>
        <ul class="admin-options hidden" id="leaderControls" style="display:none;">
          <li class="option">
            <label for="deck"><span>Deck:</span></label>
            <select id='deck' onchange='updateDeckDescription();'></select>
            <summary id='deckdescription'></summary>
          </li>
          <li class="option">
            <label for="timeLimit">Time Limit:</label>
            <select id='timeLimit'>
              <option value='30'>30 seconds</option>
              <option value='60'>60 seconds</option>
              <option value='90'>90 seconds</option>
            </select>
          </li>
          <li class="option">
            <label for="allowRedraw">Redraw same card?</label>
            <select id='allowRedraw'>
              <option value='no'>No</option>
              <option value='yes'>Yes</option>
            </select>
          </li>
          <li class="option">
            <label for="dealerSelect">Dealer defends...</label>
            <select id="dealerSelect">
              <option value='last'>Last</option>
              <option value='first'>First</option>
            </select>
          </li>
          <li id='startresult'></li>
        </ul>
      </div>
      <p style="padding-top:12px;">DEBUG MODE: <a style="color:yellow; text-decoration:underline; cursor:pointer" onclick="$('#GameOverScreen').removeClass('hidden').siblings('section').addClass('hidden');">This link should show the game over screen</a>, in it's current state. Once you're there, you've gotta refresh.</p>
      <ul id="SetupToasts"></ul>
    </section>

    <!-- GAMEPLAY screen (includes order and playing card -->
    <section id="GameView" class="order screen">
      <!-- Stopclock -->
      <div class="clock-holder hidden">
        <div class="your-clock" id="GameClock"></div>
      </div>
      <!-- Player Order -->
      <div id='orderDiv'>
        <ol class="player-order">
          <li id="player1">
            <span id="playerName1" class="player-name"></span>
          </li>
          <li id="player2">
            <span id="playerName2" class="player-name"></span>
          </li>
          <li id="player3">
            <span id="playerName3" class="player-name"></span>
          </li>
          <li id="player4">
            <span id="playerName4" class="player-name"></span>
          </li>
          <li id="player5">
            <span id="playerName5" class="player-name"></span>
          </li>
          <li id="player6">
            <span id="playerName6" class="player-name"></span>
          </li>
          <li id="player7">
            <span id="playerName7" class="player-name"></span>
          </li>
          <li id="player8">
            <span id="playerName8" class="player-name"></span>
          </li>
        </ol>
        <div id='dealerControls' class="button-holder" style='display:none'>
          <button onclick='makeDefend();'>Deal a Card</button>
        </div>
      </div>
      <!-- Your Playing Card -->
      <div id='defendDiv' class="card" style='display:none'>
        <div class="flip-container">
          <div class="flipper">
            <div class="front">
              <div class="inner">
                <img src="svg/hard.svg" id="HardCardSticker" class="this-is-hard">
                <blockquote id='statementDiv'></blockquote>
                <div class="button-holder">
                  <button onclick='donedefend()'>I'm done early.</button>
                </div>
              </div>
            </div>
            <div class="back">
              <div class="inner">
                <div id='votestatus'>It is not time to vote yet.</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </section>

    <!-- VOTING BOOTH screen (includes the ability to vote, as well as post-vote results) -->
    <section id="VotingBooth" class="vote screen hidden">
      <div class="statement-holder">
        <table>
          <thead class="my-statement">
            <tr>
              <td class="votebutton"></td>
              <td>
                <blockquote id="MyQuote">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla eu varius massa.</blockquote>
                <cite><span id="MyCite">Ol Dirty Bastard</span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="MyScoreChange"></span>
                </div>
              </td>
            </tr>
          </thead>
          <tbody id="VotingOptions">
            <tr id="voterow1">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong1' type="radio" name="player1" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote1'></blockquote>
                <cite><span id="quotecite1"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange1"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong1' type="radio" name="player1" value="MostWrong" />
                </label>
              </td>
            </tr>
            <tr id="voterow2">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong2' type="radio" name="player2" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote2'></blockquote>
                <cite><span id="quotecite2"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange2"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong2' type="radio" name="player2" value="MostWrong" />
                </label>
              </td>
            </tr>
            <tr id="voterow3">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong3' type="radio" name="player3" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote3'></blockquote>
                <cite><span id="quotecite3"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange3"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong3' type="radio" name="player3" value="MostWrong" />
                </label>
              </td>
            </tr>
            <tr id="voterow4">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong4' type="radio" name="player4" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote4'></blockquote>
                <cite><span id="quotecite4"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange4"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong4' type="radio" name="player4" value="MostWrong" />
                </label>
              </td>
            </tr>
            <tr id="voterow5">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong5' type="radio" name="player5" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote5'></blockquote>
                <cite><span id="quotecite5"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange5"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong5' type="radio" name="player5" value="MostWrong" />
                </label>
              </td>
            </tr>
            <tr id="voterow6">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong6' type="radio" name="player6" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote6'></blockquote>
                <cite><span id="quotecite6"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange6"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong6' type="radio" name="player6" value="MostWrong" />
                </label>
              </td>
            </tr>
            <tr id="voterow7">
              <td class="votebutton">
                <label>
                  <i class="fa fa-thumbs-up vote-button least-wrong-button"></i>
                  <input id='mostwrong7' type="radio" name="player7" value="LeastWrong" />
                </label>
              </td>
              <td>
                <blockquote id='votequote7'></blockquote>
                <cite><span id="quotecite7"></span></cite>
              </td>
              <td class="votebutton">
                <div class="player-score">
                  <span class="inner" id="ScoreChange7"></span>
                </div>
                <label>
                  <i class="fa fa-thumbs-down vote-button most-wrong-button"></i>
                  <input id='leastwrong7' type="radio" name="player7" value="MostWrong" />
                </label>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="button-holder hidden">
        <button id="SubmitVotes">Submit Votes</button>
        <summary id="WaitingAtBoothBecause" class="hidden"></summary>
      </div>
    </section>

    <!-- GAME OVER screen -->
    <section id="GameOverScreen" class="game-over screen hidden">
      <figure class="wrongest-reveal">
        <figcaption>The (actual) Wrongest Words</figcaption>
        <div class="quote-holder">
          <blockquote id="WrongestQuote">Sed at fringilla sem. Praesent cursus feugiat eros, sit amet mollis velit aliquam a.</blockquote>
          <cite><span id="WrongestCite">Ol Dirty Bastard</span></cite>
        </div>
        <span id="WrongestScore" class="card-score score">-6</span>
      </figure>
      <ol class="player-final-scores">
        <li id="place1">
          <span id="namePlace1" class="player-name">BBoy360</span>
          <span id="scorePlace1" class="player-score">99k</span>
        </li>
        <li id="place2">
          <span id="namePlace2" class="player-name">Bob</span>
          <span id="scorePlace2" class="player-score">13</span>
        </li>
        <li id="place3">
          <span id="namePlace3" class="player-name">Dickhead</span>
          <span id="scorePlace3" class="player-score">13</span>
        </li>
        <li id="place4">
          <span id="namePlace4" class="player-name">Dominique</span>
          <span id="scorePlace4" class="player-score">10</span>
        </li>
        <li id="place5">
          <span id="namePlace5" class="player-name">Jeff</span>
          <span id="scorePlace5" class="player-score">7</span>
        </li>
        <li id="place6">
          <span id="namePlace6" class="player-name">skunk skunk spray me now</span>
          <span id="scorePlace6" class="player-score">4</span>
        </li>
        <li id="place7">
          <span id="namePlace7" class="player-name">Tony Todd</span>
          <span id="scorePlace6" class="player-score">1</span>
        </li>
        <li id="place8">
          <span id="namePlace8" class="player-name">a</span>
          <span id="scorePlace6" class="player-score">0</span>
        </li>
      </ol>
      <div class="button-holder">
        <button id="PlayAgain">Play again?</button>
      </div>
      <p>Did you find a bug? <a href="https://github.com/AnotherDole/wrongest/issues">Submit an issue</a> to our GitHub repo</p>
      <p>Want to suggest additional Wrong Words? <a href="">Use the spreadsheet</a> I can't find a link for right now.</p>
    </section>

    <script src="https://cdn.socket.io/socket.io-1.3.2.js"></script>
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="http://flipclockjs.com/_themes/flipclockjs/js/flipclock/flipclock.js"></script>
    <script src="js/functions.js"></script>
    <script src="js/sockets.js"></script>
    <script src="js/actions.js"></script>
    <script>
var username = "";
var deckData;
var currentStatements;
var playerList;
var playerScores = {};
var meDefending = false;
var meDealer = false;
var gameOver = false;

var clock = $('.your-clock').FlipClock(10, {
  clockFace: 'MinuteCounter',
  countdown: true,
  autoStart: false,
  callbacks: {
    stop: function() {
      $('.clock-holder').addClass('hidden');
      //$('.button-holder').removeClass('hidden')
      if(meDefending){
        donedefend();
      }
    }
  }
});

if(location.pathname.length > 1){
  $('#startDiv').hide();
  $('#joinDiv').show();
  $('#joinRoomName').val(location.pathname.substr(1));
  socket.emit('requestroomdata',location.pathname.substr(1));
}
    </script>
  </body>
</html>
